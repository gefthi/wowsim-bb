name: "Destruction - Default"
description: |
  Baseline rotation without Mystic Enchants. Maintains Immolate,
  dumps Conflagrate/Chaos Bolt on cooldown, and taps for mana when needed.
variables:
  life_tap_threshold: 0.30
  life_tap_buff_refresh: 5.0
rotation:
  
  - action: cast_spell
    spell: life_tap
    when:
      any:
        - not:
            buff_active:
              buff: life_tap_buff
        - buff_active:
            buff: life_tap_buff
            max_remaining: ${life_tap_buff_refresh}
  - action: cast_spell
    spell: life_tap
    when:
      resource_percent:
        resource: mana
        lt: ${life_tap_threshold}
 
  - action: cast_spell
    spell: immolate
    when:
      any:
        - not:
            debuff_active:
              debuff: immolate      
  
  - action: cast_spell
    spell: conflagrate
    when:
      all:
        - debuff_active:
            debuff: immolate
        - not:
            buff_active:
              buff: backdraft
        - cooldown_ready:
            spell: conflagrate
  - action: cast_spell
    spell: shadowfury
    when:
      all:
        - charges:
            buff: backdraft
            lte: 0
        - cooldown_ready:
            spell: shadowfury
  - action: cast_spell
    spell: chaos_bolt
    when:
      all:
        - charges:
            buff: backdraft
            gte: 2
        - cooldown_ready:
            spell: chaos_bolt

 

  - action: cast_spell
    spell: shadowburn
    when:
      all:
        - cooldown_ready:
            spell: shadowburn
        - buff_active:
            buff: dusk_till_dawn
        - charges:
            buff: dusk_till_dawn
            gte: 3
  - action: cast_spell
    spell: chaos_bolt
    when:
      cooldown_ready:
        spell: chaos_bolt
  - action: cast_spell
    spell: soul_fire
    when:
      all:
        - buff_active:
            buff: decisive_decimation
        - buff_active:
            buff: backdraft
  - action: cast_spell
    spell: shadow_bolt
    when: true
